---
description: 生成可分享的模块文档（支持多个路径 + 需求/目的；含技术栈与关键代码片段）
---

用户调用方式：
/module-doc <模块路径...> <需求/目的>

用户输入参数：$ARGUMENTS

## 参数解析（必须按此处理）
- $ARGUMENTS 由两部分组成：
  1) 模块路径列表：一个或多个路径（文件/目录）
  2) 需求/目的：一段自然语言描述（例如“修复 cityPartner 月结页金额计算错误”“新增某字段展示”）
- 分隔规则（简单可靠）：
  - 如果参数中出现 `--`，则：
    - `--` 前面全部当作模块路径（空格分隔，允许用引号包裹含空格路径）
    - `--` 后面全部当作需求/目的
    - 示例：/module-doc "src/a b" src/c -- 修复xx bug
  - 如果没有 `--`，则：
    - 尝试从左到右把 token 解析为“存在的路径”（文件或目录）
    - 一旦遇到第一个“不是有效路径”的 token，从该 token 开始到末尾都当作需求/目的
    - 若全部 token 都是有效路径，则需求/目的为空（此时写“未提供具体目的”）

## 目标
基于给定模块路径（可多个）生成一份 Markdown“上下文包”，用于粘贴到网页端 LLM，使其能理解模块全貌并针对【需求/目的】提出修改建议。

## 生成范围（要克制）
- 只收集理解模块与达成【需求/目的】所需的最小上下文：
  - 指定路径中的核心文件
  - 入口/关键文件的直接依赖（1~2 层）
  - 与需求强相关的：路由 / 状态（pinia|vuex|store|composables）/ api(service|request) / types / constants
- 不要整库打包；代码片段总量尽量控制在 200~350 行以内（必要时更少）

## 技术栈/环境信息（必须有）
尽量从项目真实信息推断并写入（能读到什么写什么）：
- package.json：框架/语言/构建工具/包管理器
- 运行/构建脚本（dev/build/test/lint）
- 关键配置（能快速确认就写：vite/webpack/tsconfig/router/store 等）
无法确认则明确写“未从仓库中确认到”。

## 输出格式（严格）
输出一个 Markdown 文档，包含以下固定章节（顺序不要变）：

# 模块背景（给外部 LLM 的上下文）
- 模块路径：
- 需求/目的：
- 模块职责（1~3 句）：
- 在业务流程中的位置（1~3 句）：

# 项目技术栈与运行环境（尽量基于真实文件）
- 语言/框架：
- 状态管理：
- 路由：
- 构建工具/包管理器：
- 关键脚本（dev/build/test/lint）：

# 模块边界与对外接口
- 对外暴露的组件/函数/接口：
- 输入/输出（props、events、store state、API 响应等）：
- 关键依赖（内部 & 外部）：

# 关键流程（围绕需求/目的写，短 bullets）
- 渲染/调用链路：
- 状态流转（pinia/vux/store/composables）：
- 接口调用与数据结构：
- 关键分支/边界条件（与需求相关）：

# 文件地图
- high：最关键文件（3~10 个）
- middle：重要但次级（最多 12 个）
- low：可选上下文（最多 12 个）
每个文件后用括号写一句“为何重要/与需求的关系”。

# 代码片段（可粘贴给网页端 LLM）
规则：
- 只贴“最关键片段”，优先覆盖与【需求/目的】相关的路径与逻辑
- 每段必须标注来源路径（相对仓库根目录）与行号范围（能获取就写）
- 每段代码前用一句话说明“这段负责什么 + 与需求的关系”
- 避免整文件粘贴；总行数尽量 ≤ 350 行

# 给外部 LLM 的任务说明（必须）
请基于上述背景与代码片段，围绕【需求/目的】提出修改建议：
- 需要改哪些文件/函数/逻辑（尽量具体到位置）
- 可能的边界条件、潜在 bug、回归风险
- 建议的实现方案（可选：给伪代码或 patch 思路）
- 如需更多上下文，请明确列出你需要我补充的文件路径/片段

## 输出要求
- 最终只输出这一份 Markdown 文档，不要输出额外解释
- 若路径不存在：在“模块背景”里写明未找到，并继续对其他可用路径生成文档（不要中断）

现在开始：解析 $ARGUMENTS，读取对应模块，生成上述 Markdown 文档。
